<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Saha.Modals.RequestUsers"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="RequestUsersPage"
    BackgroundColor="Black">

    <ContentPage.Resources>
        <ResourceDictionary>

            <LinearGradientBrush x:Key="PageGradientBackground"
                                 StartPoint="0,0"
                                 EndPoint="1,1">
                <GradientStop Offset="0.1" Color="#00807E"/>
                <GradientStop Offset="0.5" Color="#1A596E"/>
                <GradientStop Offset="1.0" Color="#342758"/>
            </LinearGradientBrush>

            <Style x:Key="Headline" TargetType="Label">
                <Setter Property="FontSize" Value="36"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="HorizontalOptions" Value="Center"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
            </Style>

            <Style x:Key="InputEntryBorderStyle" TargetType="Border">
                <Setter Property="StrokeThickness" Value="1"/>
                <Setter Property="Stroke" Value="#88FFFFFF"/>
                <Setter Property="BackgroundColor" Value="#33FFFFFF"/>
                <Setter Property="Padding" Value="12,8"/>
                <Setter Property="Margin" Value="10,0"/>
                <Setter Property="StrokeShape">
                    <RoundRectangle CornerRadius="28"/>
                </Setter>
                <Setter Property="Shadow">
                    <Setter.Value>
                        <Shadow Brush="Black" Opacity="0.2" Radius="5" Offset="2,2"/>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="InputEntryStyle" TargetType="Entry">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="PlaceholderColor" Value="#A0FFFFFF"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="VerticalOptions" Value="Center"/>
                <Setter Property="BackgroundColor" Value="Transparent"/>
                <Setter Property="Margin" Value="0"/>
                <Setter Property="HeightRequest" Value="30"/>
            </Style>

            <Style x:Key="PrimaryActionButtonStyle" TargetType="Button">
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="Padding" Value="15"/>
                <Setter Property="Margin" Value="12,20,12,12"/>
                <Setter Property="HeightRequest" Value="55"/>
                <Setter Property="CornerRadius" Value="28"/>
                <Setter Property="Shadow">
                    <Setter.Value>
                        <Shadow Brush="Black" Opacity="0.5" Offset="4,4"/>
                    </Setter.Value>
                </Setter>
                <Setter Property="BackgroundColor" Value="#0056b3"/>
                <Setter Property="VisualStateManager.VisualStateGroups">
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Pressed">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="#004085"/>
                                    <Setter Property="Scale" Value="0.98"/>
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <VisualState.Setters>
                                    <Setter Property="Background" Value="#555555"/>
                                    <Setter Property="Opacity" Value="0.7"/>
                                    <Setter Property="TextColor" Value="#AAAAAA"/>
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </Setter>
            </Style>

            <Style x:Key="LinkTextStyle" TargetType="Label">
                <Setter Property="TextColor" Value="#ADD8E6"/>
                <Setter Property="HorizontalOptions" Value="Center"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="TextDecorations" Value="Underline"/>
            </Style>

            <Style x:Key="IconPathStyle" TargetType="Path">
                <Setter Property="Fill" Value="White"/>
                <Setter Property="VerticalOptions" Value="Center"/>
                <Setter Property="HorizontalOptions" Value="Center"/>
                <Setter Property="HeightRequest" Value="20"/>
                <Setter Property="WidthRequest" Value="20"/>
            </Style>

        </ResourceDictionary>
    </ContentPage.Resources>

    <ContentPage.Background>
        <StaticResource Key="PageGradientBackground"/>
    </ContentPage.Background>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="10">

            <!-- Header -->
            <Grid Padding="10"
                  BackgroundColor="#333"
                  ColumnDefinitions="2*,2*,2*,1*,1*,2*,2*,2*,Auto">
                <Label FontAttributes="Bold" FontSize="12" Text="Name" TextColor="White"/>
                <Label Grid.Column="1" FontAttributes="Bold" FontSize="12" Text="Email" TextColor="White"/>
                <Label Grid.Column="2" FontAttributes="Bold" FontSize="12" Text="Phone" TextColor="White"/>
                <Label Grid.Column="3" FontAttributes="Bold" FontSize="12" Text="Age" TextColor="White"/>
                <Label Grid.Column="4" FontAttributes="Bold" FontSize="12" Text="Gender" TextColor="White"/>
                <Label Grid.Column="5" FontAttributes="Bold" FontSize="12" Text="Goal" TextColor="White"/>
                <Label Grid.Column="6" FontAttributes="Bold" FontSize="12" Text="Medical" TextColor="White"/>
                <Label Grid.Column="7" FontAttributes="Bold" FontSize="12" Text="Role" TextColor="White"/>
                <Label Grid.Column="8" FontAttributes="Bold" FontSize="12" Text="Action" TextColor="White"/>
            </Grid>

            <!-- CollectionView -->
            <CollectionView ItemsSource="{Binding RequestUsers}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,1"
                              Padding="10"
                              BackgroundColor="#1A1A2E"
                              ColumnDefinitions="2*,2*,2*,1*,1*,2*,2*,2*,2*">

                            <Label FontSize="11" Text="{Binding FullName}" TextColor="White"/>
                            <Label Grid.Column="1" FontSize="11" Text="{Binding Email}" TextColor="White"/>
                            <Label Grid.Column="2" FontSize="11" Text="{Binding PhoneNumber}" TextColor="White"/>
                            <Label Grid.Column="3" FontSize="11" Text="{Binding Age}" TextColor="White"/>
                            <Label Grid.Column="4" FontSize="11" Text="{Binding Gender}" TextColor="White"/>
                            <Label Grid.Column="5" FontSize="11" Text="{Binding FitnessGoal}" TextColor="White"/>
                            <Label Grid.Column="6" FontSize="11" Text="{Binding MedicalCondition}" TextColor="White"/>

                            <Border Grid.Column="7" Margin="0,0,10,0">
                                <Picker SelectedItem="{Binding Role}" Style="{StaticResource InputEntryStyle}">
                                    <Picker.Items>
                                        <x:String>Admin</x:String>
                                        <x:String>Customer</x:String>
                                        <x:String>Trainer</x:String>
                                    </Picker.Items>
                                </Picker>
                            </Border>

                            <HorizontalStackLayout Grid.Column="8"
                                                   HorizontalOptions="Fill"
                                                   Spacing="5"
                                                   VerticalOptions="Center">
                                <Button Padding="6,4"
                                        BackgroundColor="#007BFF"
                                        Command="{Binding Source={x:Reference RequestUsersPage}, Path=BindingContext.AcceptCommand}"
                                        CommandParameter="{Binding}"
                                        CornerRadius="6"
                                        FontSize="11"
                                        HorizontalOptions="StartAndExpand"
                                        Text="Accept"
                                        TextColor="White"/>

                                <Button Padding="6,4"
                                        BackgroundColor="#D32F2F"
                                        Command="{Binding Source={x:Reference RequestUsersPage}, Path=BindingContext.DeleteCommand}"
                                        CommandParameter="{Binding}"
                                        CornerRadius="6"
                                        FontSize="11"
                                        HorizontalOptions="StartAndExpand"
                                        Text="Reject"
                                        TextColor="White"/>
                            </HorizontalStackLayout>

                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
